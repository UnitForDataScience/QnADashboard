<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Netpune NLP</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.css"/>


    <style>
        .form-control-borderless {
            border: none;
        }

        .form-control-borderless:hover, .form-control-borderless:active, .form-control-borderless:focus {
            border: none;
            outline: none;
            box-shadow: none;
        }
    </style>
</head>
<body>
<div class="Container">
    <div class="col-12">
        <div class="col-12">
            <h1>Neptune NLP</h1>
        </div>
        <ul class="nav nav-tabs col-12" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                   aria-selected="true">Summarization</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab"
                   aria-controls="profile"
                   aria-selected="false">Classification</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
                   aria-controls="contact"
                   aria-selected="false">Network Analysis</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
                   aria-controls="contact"
                   aria-selected="false">QnA</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <div class="row justify-content-left">
                    <div class="col-4 row">
                        <div style="padding: 6%;" class="col-12">
                            <input type="file"
                                   id="summarization_files" name="avatar"
                                   multiple="multiple">
                        </div>
                        <div class="col-12">
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                                       value="tf" checked="checked">
                                <label class="form-check-label" for="inlineRadio1">Basic Term Count</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                                       value="page_rank">
                                <label class="form-check-label" for="inlineRadio2">Understand Context</label>
                            </div>

                        </div>
                    </div>
                    <div class="col-8">
                        <div class="card card-sm">
                            <div class="card-body row no-gutters align-items-center">
                                <div class="col-auto">
                                    <i class="fas fa-search h6 text-body"></i>
                                </div>
                                <!--end of col-->
                                <div class="col">
                                    <input class="form-control form-control-sm form-control-borderless"
                                           id="summary_keywords" type="search"
                                           placeholder="Keywords">
                                </div>
                                <!--end of col-->
                                <div class="col-auto">
                                    <button class="btn btn-sm btn-success" type="submit" id="get_summary">Search
                                    </button>
                                </div>
                                <!--end of col-->
                            </div>
                        </div>
                        <div id="summary_tags">

                        </div>
                    </div>

                    <div class="col-12" style="margin-top: 2%;">
                        <table id="summarization_table" class="table table-striped table-bordered" style="width:100%">
                            <thead>
                            <tr>
                                <th>File</th>
                                <th>Summary</th>
                            </tr>
                            </thead>
                            <tbody></tbody>
                            <tfoot>
                            <tr>
                                <th>File</th>
                                <th>Summary</th>
                            </tr>
                            </tfoot>
                        </table>
                    </div>
                    <!--end of col-->
                </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">Coming Soon</div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">Coming Soon</div>
        </div>
    </div>

</div>
<script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
></script>
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.6/socket.io.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/async/2.6.2/async.min.js"></script>
<script>
    var request_array = [];

    function uuidv4() {
        return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
            (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
        )
    }

    function add_script(src) {
        var newScript = document.createElement("script");
        newScript.src = src + '?uuid=' + uuidv4();
        document.getElementsByTagName('script')[0].parentNode.appendChild(newScript)
    }

    var scripts = ['/static/js/index.js']
    for (i in scripts) {
        add_script(scripts[i])
    }
    var socket = io.connect('http://' + document.domain + ':' + location.port);
    socket.on('connect', function () {
        socket.emit('connected');
    });
    socket.on('message', function (data) {
        if (data['type'] === 'summarize') {
            update_request_rows(data)
        }
    });
    async.forever(
        function (next) {
            if (request_array.length !== 0) {
                socket.emit('request', request_array.shift());
            }
            setTimeout(function () {
                next();
            }, 500);
        },
        function (err) {
            // if next is called with a value in its first parameter, it will appear
            // in here as 'err', and execution will stop.
        }
    );

</script>
</body>
</html>